<?xml version="1.0"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:view="com.backendless.examples.flex.login.presentation.view.*"
               xmlns:ns="http://www.spicefactory.org/parsley"
               xmlns:components="com.backendless.examples.flex.components.*"
               applicationComplete="applicationCompleteHandler(event)"
               currentState="{this.model.destination}" viewSourceURL="srcview/index.html">

    <fx:Script>
        <![CDATA[
        import com.backendless.examples.flex.login.Context;
        import com.backendless.examples.flex.login.presentation.IMainPM;

        import mx.events.FlexEvent;

        [Bindable]
        private var showOutput:Boolean = false;

        [Inject]
        [Bindable]
        public var model:IMainPM;

        private function applicationCompleteHandler(event:FlexEvent):void
        {
            model.startup();
        }
        ]]>
    </fx:Script>

    <fx:Style source="css/font.css" />
    <fx:Style source="css/text.css" />
    <fx:Style source="css/view.css" />

    <fx:Declarations>
        <ns:Configure />
        <ns:ContextBuilder config="{Context}" />
    </fx:Declarations>

    <s:states>
        <s:State name="loading" />
        <s:State name="login" />
        <s:State name="checkMail" />
        <s:State name="loggedIn" />
    </s:states>

    <components:Header id="header" width="100%" height="40" title="Backendless Login Example" />

    <s:Group left="0" top="60" right="0" bottom="40">
        <view:LoginView width="320" height="420" verticalCenter="0" horizontalCenter="0" includeIn="login" />
        <view:CheckMailView width="320" height="420" verticalCenter="0" horizontalCenter="0" includeIn="checkMail" />
        <view:LoggedInView width="320" height="420" verticalCenter="0" horizontalCenter="0" includeIn="loggedIn" />
    </s:Group>

    <s:RichText styleName="h5" bottom="20" horizontalCenter="0">
        <s:textFlow>
            <s:TextFlow>
                This is a sample application that demonstrates working with Backendless's UserService.
            </s:TextFlow>
        </s:textFlow>
    </s:RichText>

    <components:Output left="0" right="0" bottom="0" height="100" visible="{this.header.outputShown}" includeInLayout="{this.header.outputShown}" />

</s:Application>
