<?xml version="1.0"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:view="com.backendless.examples.flex.login.presentation.view.*"
    xmlns:ns="http://www.spicefactory.org/parsley" width="600" height="600"
    applicationComplete="applicationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
        import com.backendless.examples.flex.login.domain.Model;
        import com.backendless.examples.flex.login.Context;
        import com.backendless.examples.flex.login.presentation.HomePM;
        import com.backendless.examples.flex.login.presentation.IHomePM;

        import mx.controls.Alert;
        import mx.events.FlexEvent;

        [Inject]
        [Bindable]
        public var model:IHomePM;

        private function applicationCompleteHandler(event:FlexEvent):void
        {
            model.startup();
        }

        ]]>
    </fx:Script>

    <fx:Style source="/css/fonts.css" />
    <fx:Style source="/css/text.css" />
    <fx:Style source="/css/view.css" />

    <fx:Declarations>
        <ns:Configure />
        <ns:ContextBuilder config="{Context}" />
    </fx:Declarations>

    <s:Group left="0" top="0" right="0" height="40">
        <s:Rect width="100%" height="100%">
            <s:fill>
                <s:SolidColor color="#333333" />
            </s:fill>
        </s:Rect>
        <s:Label left="10" verticalCenter="0" styleName="h2" text="Backendless / Login" />
    </s:Group>

    <mx:ViewStack width="320" height="480" horizontalCenter="0" verticalCenter="20" selectedIndex="{this.model.selectedIndex}">
        <s:NavigatorContent>
            <view:LoginView width="100%" height="100%"/>
        </s:NavigatorContent>
        <s:NavigatorContent>
            <view:CheckMailView width="100%" height="100%"/>
        </s:NavigatorContent>
        <s:NavigatorContent>
            <view:LoggedInView width="100%" height="100%"/>
        </s:NavigatorContent>
    </mx:ViewStack>

    <s:RichText bottom="20" horizontalCenter="0">
        <s:textFlow>
            <s:TextFlow>

            </s:TextFlow>
        </s:textFlow>
    </s:RichText>

</s:Application>
