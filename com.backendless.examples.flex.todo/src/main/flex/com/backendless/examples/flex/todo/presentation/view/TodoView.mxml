<?xml version="1.0"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:parsley="http://www.spicefactory.org/parsley">

    <fx:Script>
        <![CDATA[
        import com.backendless.examples.flex.todo.presentation.ITodoPM;
        import com.backendless.examples.flex.todo.presentation.renderers.TodoItemRenderer;

        import mx.events.FlexEvent;

        [Inject]
        [Bindable]
        public var model:ITodoPM;

        private function newTodo_enterHandler(event:FlexEvent):void
        {
            model.addTodo(newTodo.text);
        }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <parsley:Configure />
    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <s:TextInput id="newTodo" width="100%" height="40" text="@{this.model.newTodoLabel}" enter="newTodo_enterHandler(event)" />

    <s:List width="100%" dataProvider="{this.model.todoList}">
        <s:layout>
            <s:VerticalLayout gap="4" requestedMaxRowCount="8" />
        </s:layout>
        <s:itemRenderer>
            <fx:Component>
                <s:ItemRenderer width="100%">
                    <fx:Script>
                        <![CDATA[
                        import com.backendless.examples.flex.todo.domain.Todo;
                        ]]>
                    </fx:Script>

                    <s:states>

                    </s:states>

                    <s:Rect left="0" top="0" right="0" bottom="0">
                        <s:fill>
                            <s:SolidColor color="#FFFFFF" />
                        </s:fill>
                    </s:Rect>

                    <s:HGroup left="0" top="0" right="0" bottom="0" verticalAlign="middle" gap="0">
                        <s:Group width="40" height="40">
                            <s:Button styleName="iconButton" color="{data.done ? 0x333 : 0xEEEEEE}" label="&#xF00C;" horizontalCenter="0" verticalCenter="0" click="outerDocument.model.checkTodo(data as Todo);" />
                        </s:Group>

                        <s:Label text="{data.label}" lineThrough="{data.done}" width="100%" />

                        <s:Group width="40" height="40">
                            <s:Button styleName="iconButton" label="&#xF00D;" horizontalCenter="0" verticalCenter="0" click="outerDocument.model.removeTodo(data as Todo);" />
                        </s:Group>
                    </s:HGroup>
                </s:ItemRenderer>
            </fx:Component>
        </s:itemRenderer>
    </s:List>

</s:Group>
